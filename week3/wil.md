![image](https://github.com/user-attachments/assets/d4e65f85-e0c7-4eac-9672-0923c5211343)
> 친구는 유저와 유저 사이의 관계이므로 N:M 관계에 속하는 것 같다.
> 그러면 중간 테이블로 나누어줘야겠지?
> 이렇게하는게 맞나 싶긴 한데...

![image](https://github.com/user-attachments/assets/134247e0-73ee-45ff-b9df-cb5a95284275)
> H2 데이터베이스 관리자 콘솔에서 강의와같이 따라했더니 테이블이 생성되었다. 이렇게 직접 만들어보는게 처음이라 조금 신기한느낌..

## JPA란?
- **JPA (Java Persistence API)**: 자바 객체랑 DB 데이터를 자동으로 연결(매핑)해주는 기술(ORM).
- **엔티티**: DB 테이블이랑 연결되는 자바 클래스. 테이블의 한 줄이 엔티티 객체 하나.
- **JPA 장점**: 엔티티 클래스만 잘 만들면 DB 테이블 만들고, 데이터 넣고 빼는 SQL 코드(CRUD)를 JPA가 알아서 처리해 줌 → 코딩 시간 절약
- **DB 준비**: H2 데이터베이스 사용
    - **H2 콘솔 접속**: 프로그램 실행 후 `localhost:8080/h2-console` (또는 설정한 주소)로 들어가서 연결.

## 엔티티 클래스 만들기
- **기본**: 클래스가 테이블, 클래스 안의 변수(필드)들이 컬럼.
- **주요 어노테이션**:
    - @Entity: 이 클래스는 엔티티다
    - @Id: 이 필드가 PK다
    - @GeneratedValue(strategy = GenerationType.IDENTITY): PK 값 자동으로 1씩 증가하게 DB에 맡기기.
    - @Column: 컬럼 이름이나 타입 같은 세부 설정.

## 엔티티끼리 관계 맺기
- **외래키(FK) 표현**: FK 컬럼을 직접 만들지 않고, 연결될 엔티티 객체를 필드로 추가.
    - 이렇게 하면 나중에 연결된 데이터 쓸 때 JPA가 알아서 처리해줘서 편함.
- **주요 어노테이션**:
    - @JoinColumn: FK 컬럼 설정 (예: FK 컬럼 이름 지정).
    - 관계 종류 표시: @ManyToOne (N:1), @OneToOne (1:1) 등.
        - @ManyToMany (N:M)는 중간 테이블로 만드니까 잘 안 씀.
        - @OneToMany (1:N)는 양쪽에서 서로 연결 정보 가질 때 (양방향) 씀 (이번엔 한쪽에서만 아는 단방향 위주).
- **fetch 속성**: 연결된 엔티티 데이터를 언제 가져올지 정함. LAZY 추천!
    - EAGER: 부모 엔티티 가져올 때 자식 엔티티 데이터도 한꺼번에 다 가져옴.
    - LAZY (지연 로딩): 부모 엔티티 가져올 땐 일단 놔두고, 자식 엔티티 데이터가 실제로 필요할 때 가져옴. (효율적)

## 7. 엔티티 생성자 만들기
- **일반 생성자**: PK 필드(id) 빼고 나머지 필드들로 생성자 만들기 (id는 자동 생성되니까).
    - @Builder 어노테이션 쓰면 더 편하게 객체 만들 수도 있음.
- **기본 생성자**: JPA가 쓰려면 아무 인자 없는 생성자가 필요함 (public 또는 protected).
    - @NoArgsConstructor(access = AccessLevel.PROTECTED): protected로 기본 생성자 자동 추가.
- @Getter: 각 필드값 가져오는 getter 메소드들 자동 추가.
